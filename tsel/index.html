
<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Paket Terbaik</title>
  <!-- Favicons -->
  <link href="https://kodebayar.web.id/assets/images/icon2.png" rel="icon">
  <link href="https://kodebayar.web.id/assets/images/icon2.png" rel="apple-touch-icon">
  <link href="https://kodebayar.web.id/assets/images/icon2.png" rel="shortcut icon" type="image/x-icon"/>
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://kodebayar.web.id/assets/plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="https://kodebayar.web.id/assets/dist/css/adminlte.min.css">
  <!-- SweetAlert2 -->
  <link rel="stylesheet" href="https://kodebayar.web.id/assets/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
  <!-- Toastr -->
  <link rel="stylesheet" href="https://kodebayar.web.id/assets/plugins/toastr/toastr.min.css">
	<!-- jQuery -->
	<script src="https://kodebayar.web.id/assets/plugins/jquery/jquery.min.js"></script>
</head>
<body class="hold-transition layout-top-nav layout-navbar-fixed ">
<div class="wrapper">
  <style type="text/css">
	.center {
  margin: auto;
  width: 50%;
}
</style>
<!-- Navbar -->
<nav class="main-header navbar navbar-expand-md navbar-light navbar-danger">
  <div class="container justify-content-center">
    

    <div class="brand-text font-weight-light" id="">
    	<h3>Telkomsel</h3>
    </div>

    
  </div>
</nav>
<!-- /.navbar -->

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <div class="content-header">
    <div class="container">

    </div><!-- /.container-fluid -->
  </div>
  <!-- /.content-header -->

  <!-- Main content -->
  <div class="content">
    <div class="container">
    	<div class="row justify-content-center" >
							  <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
			    <div class="card card-danger card-outline">
			      <div class="card-body">
			        <h5 class="card-title">Nomor HP</h5>
			        <div class="form-group">
			        	<input id="token" name="ci_csrf_token" type="hidden" value="">
			        	<input id="apikey" name="apikey" type="hidden" value="uM9GneAGJvhqREZ1YM2E0W5XLzRTR0tIbXlIclRuYTF5U1lOS3c9PQ==">
			          <input type="tel" class="form-control form-control-border" id="nohp" name="nohp" placeholder="Masukkan nomor HP">
			        </div>

			        <button type="button" class="btn btn-block bg-danger" onclick="search('')">Lihat Paket</button>
			        <span id="text_alert" class="d-none text-danger"></span>
			      </div>
			      <div class="overlay dark invisible" id="overlay_paging">
				    <i class="fas fa-2x fa-sync-alt fa-spin"></i>	    
				  </div>
			    </div><!-- /.card -->
			  </div>
			  <!-- /.col-md-6 -->
			</div>
			<div class="row justify-content-center " id="list_menu">
				<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
					<div class="row" >
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
							
						</div>
						<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" id="list_ms">
							
						</div>
					</div>
				</div>
			</div>
			<div class="row justify-content-center" >
				
				<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" >
					<div class="row" id="response">
						
					</div>
				</div>
			</div>
      <!-- /.row -->
    </div><!-- /.container-fluid -->
  </div>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->

<script type="text/javascript">
	$(document).ready(function(){
		$("#nohp").keyup(function(e){
			var nohp = $("#nohp").val();
			nohp = nohp.replace(/[^0-9]/g,'');
			$("#nohp").val(nohp);
		})
	});
	function filter_paket(){
		var value = $("#filter").val().toLowerCase();
	    $("#response > .list_produk").filter(function() {
	      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
	    });
	}
function show_paket(ms){
	$("#filter").val('');
	filter_paket();
	if(ms!='0'){

		$(".btn_ms").removeClass("active");
		var btn = $(".ms_"+ms);
		btn.addClass("active");

		$(".list_produk").addClass("d-none");
		$(".list_"+ms).removeClass("d-none");
	} else {
		$(".btn_ms").removeClass("active");
		var btn = $(".ms_"+ms);
		btn.addClass("active");
		
		$(".list_produk").removeClass("d-none");
	}
		
}
function changelayout(){
	var html = $("#btn_layout").html();
	// alert(html);
	if(html=='<i class="fa fa-th-large"></i>'){
		$(".list_produk").addClass("col-12");
		$(".list_produk").removeClass("col-6");
		$("#btn_layout").html('<i class="fa fa-th-list"></i>');
	} else {
		$(".list_produk").removeClass("col-12");
		$(".list_produk").addClass("col-6");
		$("#btn_layout").html('<i class="fa fa-th-large"></i>');
	}
		
}
function search(id){

	var token = $("#token").val();
	var nohp = $("#nohp").val();
	if(nohp==""){
		alert("Harap masukkan nohp");
	} else {
		$("#text_alert").addClass("d-none");
		$("#list_menu").addClass("d-none");
		$("#btn_layout").html('<i class="fa fa-th-list"></i>');
		$("#response").addClass("d-none");
		buka_overlay("overlay_paging");
		$.ajax({
			url 	: 'https://kodebayar.web.id/home/search_page?provider=TELKOMSEL',
			data 	: { nohp : nohp, menu_id : id, ci_csrf_token : token },
			type 	: 'POST',
			dataType: 'JSON',
			success : function(data){
				if(data.is_valid_number==true){
					$("#response").html(data.isi);
					$("#list_ms").html(data.menu);
					$("#response").removeClass("d-none");
					$("#list_menu").removeClass("d-none");
					$("#text_alert").addClass("d-none");
				} else {
					$("#text_alert").removeClass("d-none");
					$("#text_alert").text(data.ket);
				}
					
				$("#token").val(data.token);
				tutup_overlay("overlay_paging");

			},
			error 	: function(data){
				tutup_overlay("overlay_paging");
				alert("Terjadi kesalahan");
			}
		});
	}	
}

function order(kode_produk, kode, unik, menu_id){
	var token = $("#token").val();
	var nohp = $("#nohp").val();
	var kodebeli = $("#kodebeli_"+kode).val();
	if(nohp==""){
		alert("Harap masukkan nohp");
	} else {
		buka_overlay("overlay_paging_"+kode);
		$.ajax({
			url 	: 'https://kodebayar.web.id/home/inquiry_page?provider=TELKOMSEL',
			data 	: { nohp : nohp, kode : kodebeli, id : unik, menu_id : menu_id, ci_csrf_token : token },
			type 	: 'POST',
			dataType: 'JSON',
			success : function(data){
				tutup_overlay("overlay_paging_"+kode);
				location.href = 'https://kodebayar.web.id/v2/order_page/'+data.kode_bayar+"?provider=TELKOMSEL";
			},
			error 	: function(data){
				tutup_overlay("overlay_paging_"+kode);
				alert("Terjadi kesalahan");
			}
		});
	}
}
function buka_overlay(overlay_id){
    $("#"+overlay_id).removeClass("invisible");
}
function tutup_overlay(overlay_id){
    $("#"+overlay_id).addClass("invisible");
}
function select_menu(id){
	$(".select_menu").removeClass("active");
	$(".menu_"+id).addClass("active");
	// $("#mlid").val(id);
	search(id);
}
</script></div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<!-- Bootstrap 4 -->
<script src="https://kodebayar.web.id/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="https://kodebayar.web.id/assets/dist/js/adminlte.min.js"></script>
<!-- SweetAlert2 -->
<script src="https://kodebayar.web.id/assets/plugins/sweetalert2/sweetalert2.min.js"></script>
<!-- Toastr -->
<script src="https://kodebayar.web.id/assets/plugins/toastr/toastr.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="https://kodebayar.web.id/assets/dist/js/demo.js"></script>
</body>
</html>