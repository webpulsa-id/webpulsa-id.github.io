<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Paket Terbaik</title>
  <!-- Favicons -->
  <link href="https://kodebayar.web.id/assets/images/icon2.png" rel="icon">
  <link href="https://kodebayar.web.id/assets/images/icon2.png" rel="apple-touch-icon">
  <link href="https://kodebayar.web.id/assets/images/icon2.png" rel="shortcut icon" type="image/x-icon"/>
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://kodebayar.web.id/assets/plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="https://kodebayar.web.id/assets/dist/css/adminlte.min.css">
  <!-- SweetAlert2 -->
  <link rel="stylesheet" href="https://kodebayar.web.id/assets/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
  <!-- Toastr -->
  <link rel="stylesheet" href="https://kodebayar.web.id/assets/plugins/toastr/toastr.min.css">
 <!-- jQuery -->
 <script src="https://kodebayar.web.id/assets/plugins/jquery/jquery.min.js"></script>
</head>
<body class="hold-transition layout-top-nav layout-navbar-fixed ">
<div class="wrapper">
  <style type="text/css">
 .center {
  margin: auto;
  width: 50%;
}
</style>
<!-- Navbar -->
<nav class="main-header navbar navbar-expand-md navbar-light navbar-danger">
  <div class="container justify-content-center">
    

    <div class="brand-text font-weight-light" id="">
     <h3>Telkomsel OMNI</h3>
      <!-- Left navbar links -->
      <!-- <ul class="navbar-nav">
        <li class="nav-item">
          <a href="#" class="nav-link">Hot Promo</a>
        </li>
      </ul> -->
    </div>

    
  </div>
</nav>
<!-- /.navbar -->

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <div class="content-header">
    <div class="container">

    </div><!-- /.container-fluid -->
  </div>
  <!-- /.content-header -->

  <!-- Main content -->
  <div class="content">
    <div class="container">
     <div class="row justify-content-center" > 
     <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
       <div class="card card-danger card-outline">
         <div class="card-body">
           <h5 class="card-title">Nomor HP 08</h5>
           <div class="form-group">
            <input id="token" name="ci_csrf_token" type="hidden" value="">
             <input type="tel" class="form-control form-control-border" id="nohp" name="nohp" placeholder="Masukkan nomor HP">
           </div>
           <button type="button" class="btn btn-danger btn-block m-b" onclick="search('')">Lihat Pilihan Produk</button>
           <span id="alert_text" class="d-none text-danger"></span>
         </div>
         <div class="overlay dark invisible" id="overlay_paging">
        <i class="fas fa-2x fa-sync-alt fa-spin"></i>     
      </div>
       </div><!-- /.card -->
     </div>
     <!-- /.col-md-6 -->
   </div>
   <div class="row justify-content-center " id="list_menu">
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
     <div class="row" >
      
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 pad" id="list_ms">
       <!-- <ul class="nav nav-tabs justify-content-center mb-3" role="tablist">
                   <li class="nav-item">
                     <a class="nav-link active" id="custom-tabs-four-home-tab" data-toggle="pill" href="#custom-tabs-four-home" role="tab" aria-controls="custom-tabs-four-home" aria-selected="true">Home</a>
                   </li>
                   <li class="nav-item">
                     <a class="nav-link" id="custom-tabs-four-profile-tab" data-toggle="pill" href="#custom-tabs-four-profile" role="tab" aria-controls="custom-tabs-four-profile" aria-selected="false">Profile</a>
                   </li>
                 </ul>
       <button type="button" class="btn btn-outline-danger">Danger</button>
       <button type="button" class="btn btn-outline-danger">Danger</button>
       <button type="button" class="btn btn-outline-danger">Danger</button>
       <button type="button" class="btn btn-outline-secondary float-right" id="btn_layout" onclick="changelayout()"><i class="fa fa-th-list"></i></button> -->
      </div>
      <!-- <div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">
       
      </div> -->
     </div>
    </div>
   </div>
   <div class="row" id="json_respon">
   </div>
   <div class="row justify-content-center" >
    
    <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12" >
     <div class="row" id="hasil_respon">
      
     </div>
    </div>
   </div>
      <!-- /.row -->
    </div><!-- /.container-fluid -->
  </div>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->

<script type="text/javascript">
 $(document).ready(function(){
  $("#nohp").keyup(function(e){
   var nohp = $("#nohp").val();
   nohp = nohp.replace(/[^0-9]/g,'');
   $("#nohp").val(nohp);
  })
 });
function show_paket(ms){
 if(ms!='0'){
  var btn = $(".ms_"+ms);

  $(".btn_ms").removeClass("active");
  btn.addClass("active");

  $(".list_produk").addClass("d-none");
  $(".list_"+ms).removeClass("d-none");
 } else {
  $(".btn_ms").removeClass("active");
  $(".list_produk").removeClass("d-none");
 }
  
}
function changelayout(){
 var html = $("#btn_layout").html();
 // alert(html);
 if(html=='<i class="fa fa-th-large"></i>'){
  $(".list_item").addClass("col-12");
  $(".list_item").removeClass("col-6");
  $("#btn_layout").html('<i class="fa fa-th-list"></i>');
 } else {
  $(".list_item").removeClass("col-12");
  $(".list_item").addClass("col-6");
  $("#btn_layout").html('<i class="fa fa-th-large"></i>');
 }
  
}
// function search(id){
//  buka_overlay("overlay_paging");
//  $.ajax({
//   url  : 'https://kodebayar.web.id/Telkomsel/search',
//   data  : $("#form_omni").serialize()+"&mlid="+id,
//   type  : 'POST',
//   dataType: 'JSON',
//   success : function(data){
//    tutup_overlay("overlay_paging");
//    if(data.SubscriberType!=""){
//     $("#hasil_respon").removeClass("d-none");
//     $("#json_respon").html(data.menu);
//     $("#hasil_respon").html(data.isi);
//     pilih_menu(data.category);
//     $("#alert_text").text("");
//    } else {
//     $("#alert_text").text("Paket tidak tersedia untuk nomor yang dituju");
//    }
    
//   }, 
//   error  : function(data){
//    tutup_overlay("overlay_paging");
//    alert("error");
//   } 
//  })
// }
function search(id){

 var token = $("#token").val();
 var nohp = $("#nohp").val();
 if(nohp==""){
  alert("Harap masukkan nohp");
 } else {
  $("#list_menu").addClass("d-none");
  $("#hasil_respon").addClass("d-none");
  $("#btn_layout").html('<i class="fa fa-th-list"></i>');
  buka_overlay("overlay_paging");
  $.ajax({
   url  : 'https://kodebayar.web.id/Telkomsel/search',
   data  : { nohp : nohp, mlid : id, ci_csrf_token : token },
   type  : 'POST',
   dataType: 'JSON',
   success : function(data){
    // $("#response").html(data.isi);
    // $("#list_ms").html(data.menu);
    // $("#response").removeClass("d-none");
    // $("#text_alert").addClass("d-none");
     
    tutup_overlay("overlay_paging");
    $("#token").val(data.token);

    if(data.SubscriberType!=""){
     $("#list_menu").removeClass("d-none");
     $("#hasil_respon").removeClass("d-none");
     $("#hasil_respon").html(data.isi);
     $("#list_ms").html(data.menu);
     pilih_menu(data.category);
     $("#alert_text").addClass("d-none");
     $("#alert_text").text("");
    } else {
     $("#list_menu").addClass("d-none");
     $("#hasil_respon").addClass("d-none");
     $("#alert_text").removeClass("d-none");
     $("#alert_text").text("Paket tidak tersedia untuk nomor yang dituju");
    }
   },
   error  : function(data){
    tutup_overlay("overlay_paging");
    alert("Terjadi kesalahan");
   }
  })
 } 
}
function order(id){

 var idnya = $("#id_"+id).val();
 var namanya = $("#nama_"+id).val();
 var harganya = $("#harga_"+id).val();
 var token = $("#token").val();
 var nohp = $("#nohp").val();
 if(nohp==""){
  alert("Harap masukkan nohp");
 } else {
  buka_overlay("overlay_paging_"+id);
  $.ajax({
   url  : 'https://kodebayar.web.id/Telkomsel/inquiry',
   data  : { nohp : nohp, packageid : idnya, nama : namanya, harga : harganya, ci_csrf_token : token },
   type  : 'POST',
   dataType: 'JSON',
   success : function(data){
    // alert(data.payment_code);
    tutup_overlay("overlay_paging_"+id);
    location.href = 'https://kodebayar.web.id/Telkomsel/order/'+data.payment_code;
   },
   error  : function(data){
    tutup_overlay("overlay_paging_"+id);
    alert("Terjadi kesalahan");
   }
  });
 }
}
function show_kode(){
 $("#modal_kode").modal("show");
}
function pilih_menu(id){
 $(".btn_category").removeClass("active");
 $(".btn_"+id).addClass("active");
 $(".list_item").addClass("d-none");
 $("."+id).removeClass("d-none");
}
function select_menu(id){
 $(".select_menu").removeClass("active");
 $(".menu_"+id).addClass("active");
 $("#mlid").val(id);
 search(id);
}
function buka_overlay(overlay_id){
    $("#"+overlay_id).removeClass("invisible");
}
function tutup_overlay(overlay_id){
    $("#"+overlay_id).addClass("invisible");
}

</script></div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<!-- Bootstrap 4 -->
<script src="https://kodebayar.web.id/assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="https://kodebayar.web.id/assets/dist/js/adminlte.min.js"></script>
<!-- SweetAlert2 -->
<script src="https://kodebayar.web.id/assets/plugins/sweetalert2/sweetalert2.min.js"></script>
<!-- Toastr -->
<script src="https://kodebayar.web.id/assets/plugins/toastr/toastr.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="https://kodebayar.web.id/assets/dist/js/demo.js"></script>
</body>
</html>
